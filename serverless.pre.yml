service: youareawesomeapp-pre
# app and org for use with dashboard.serverless.com
app: youareawesomeapp
org: prosingularity

plugins:
  - serverless-plugin-typescript
  - serverless-offline # must come after typescript

# only deploy with specific Serverless version
frameworkVersion: ^2.2.0
useDotenv: true

provider:
  name: aws
  runtime: nodejs12.x
  region: eu-central-1
  stage: prod
  profile: serverless
  lambdaHashingVersion: 20201221

# WORKAROUND: deploy this fn separately so that it receives a different URI that we want to use in the fn's of serverless.yml
functions:
  sendPushNotif:
    handler: src/send-push-notification.handler
    events:
      - http:
          path: "/push-notifications/send/"
          method: post
    environment:
      FETCH_POSTS_URI: ${env:FETCH_POSTS_URI}
      SYMMETRIC_ENCRYPTION_KEY: ${env:SYMMETRIC_ENCRYPTION_KEY}
